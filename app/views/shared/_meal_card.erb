<div  class="container mt-3 mb-3"  style="padding: initial" >
  <div data-controller="click-icon" class="card-body" >


    <div id="header d-flex justify-content-start opacity-0" class="card-title" >
      <%= link_to profile_path(meal.user_id, meal.id) do %>
        <%= cl_image_tag meal.user.photo.key, :default_image => "https://res.cloudinary.com/dk8ykeiqh/image/upload/v1694633061/non_existing_id_r0puhy.png", class: "avatar-large" %>
        <p class="text-decoration-none"><%= meal.user.username %></p>
      <% end %>
    </div>

    <div id="user_image" class="card-body" >
      <%= link_to user_meal_path(meal.user_id, meal.id), class:"text-decoration-none link-dark" do %>
        <%= cl_image_tag meal.photo.key, height: 500, width: 400, crop: :fill, class: "card-img-top mt-3" %>
      <% end %>
    </div>

    <div  class="card-gradient" id="title_of_restaurant" >
      <div class="d-flex justify-content-between">
        <h5><%= meal.title%> at <%= meal.restaurant %></h5>
        <div class="p-1">
          <% if current_user == meal.user  %>
            <%= link_to edit_user_meal_path(meal.user_id, meal.id) do%>
              <i class="fa-solid fa-pen-to-square" style="color: #6f7785"></i>
            <% end %>
            <%= link_to user_meal_path(meal.user_id, meal.id), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } do%>
              <i class="fa-solid fa-xmark" style="color: #6f7785;"></i>
            <% end %>
          <% end %>
        </div>
      </div>
      <p><%= meal.caption %></p>
    </div>



    <div>
      <i class="fa-regular fa-heart fa-2xl" data-action="click->click-icon#toggleHeart" data-click-icon-target="heart"></i>
      <i class="fa-regular fa-comment fa-2xl" data-action="click->click-icon#showComment" data-click-icon-target="comment-icon"></i>
      <i class="fa-regular fa-share-from-square fa-2xl" data-action="click->click-icon#copy" data-click-icon-target="share-icon" data-click-icon-url-value= "/users/:user_id/meals/:id"></i>


      <div id="comments" class="d-none" data-click-icon-target="comment">


        <div id="show-comments" data-click-icon-target="show-comments" class="">
          <ul data-click-icon-target="list" style="list-style-type: none;">
            <% meal.comments.each do |comment| %>
              <%= render "shared/comment", comment: comment %>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <div>
      <%= render "shared/comment_form", meal: meal, comment: @comment %>
    </div>
  </div>
</div>
